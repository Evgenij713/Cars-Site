document.getElementById("carForm").addEventListener("submit",function(t){t.preventDefault(),s();const r=new FormData(this);fetch("/cars",{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:r}).then(e=>e.ok?e.json():e.json().then(n=>{throw n})).then(e=>{e.success&&(window.location.href=e.redirect)}).catch(e=>{e.errors?c(e.errors):(console.error("Error:",e),alert("Произошла ошибка при отправке формы"))})});function c(t){for(const[r,e]of Object.entries(t)){const n=document.querySelector(`[name="${r}"]`),o=document.getElementById(`${r}-error`);n&&o&&(n.classList.add("is-invalid"),o.textContent=e.join(", "))}}function s(){document.querySelectorAll(".error-message").forEach(t=>{t.textContent=""}),document.querySelectorAll(".is-invalid").forEach(t=>{t.classList.remove("is-invalid")})}
