document.getElementById("carForm").addEventListener("submit",function(t){t.preventDefault(),a();const n=document.getElementById("carForm").dataset.carId,r=new FormData(this);r.append("_method","PUT"),fetch(`/cars/${n}/edit`,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:r}).then(e=>e.ok?e.json():e.json().then(c=>{throw c})).then(e=>{e.success&&(window.location.href=e.redirect)}).catch(e=>{e.errors?s(e.errors):(console.error("Error:",e),alert("Произошла ошибка при отправке формы"))})});function s(t){for(const[o,n]of Object.entries(t)){const r=document.querySelector(`[name="${o}"]`),e=document.getElementById(`${o}-error`);r&&e&&(r.classList.add("is-invalid"),e.textContent=n.join(", "))}}function a(){document.querySelectorAll(".error-message").forEach(t=>{t.textContent=""}),document.querySelectorAll(".is-invalid").forEach(t=>{t.classList.remove("is-invalid")})}
